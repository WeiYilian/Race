Index: .idea/.idea.Race/.idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"3f681314-839d-4fc6-9491-50771a848bcb\" name=\"默认的\" comment=\"基础旋转1\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/.idea.Race/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/.idea.Race/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assets/Scenes/Game1.unity\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assets/Scenes/Game1.unity\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assets/Scenes/test.unity\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assets/Scenes/test.unity\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assets/Scripts/ControllerFile/ViewController.cs\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assets/Scripts/ControllerFile/ViewController.cs\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"HighlightingSettingsPerFile\">\r\n    <setting file=\"file://$PROJECT_DIR$/Assets/Scripts/ControllerFile/CameraController.cs\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/Assets/Scripts/Tools/GameLoop.cs\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/Library/PackageCache/com.unity.ide.rider@1.2.1/Rider/Editor/RiderScriptEditor.cs\" root0=\"SKIP_HIGHLIGHTING\" />\r\n  </component>\r\n  <component name=\"IdeDocumentHistory\">\r\n    <changedPaths>\r\n      <option value=\"$PROJECT_DIR$/Assets/NewBehaviourScript.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/SceneStateManager/Concrete/MainScene.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/Controller/BoxController.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/StartUIManager.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/SceneStateManager/Concrete/StartScene.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/SceneStateManager/SceneStateController.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/GameLoop.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/SceneStateManager/Concrete/LoadScene.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/ManagerFile/StartUIManager.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/Tools/GameLoop.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/ControllerFile/RotDirection.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/CameraController.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/ControllerFile/BoxController.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/ControllerFile/CameraController.cs\" />\r\n      <option value=\"$PROJECT_DIR$/Assets/Scripts/ControllerFile/ViewController.cs\" />\r\n    </changedPaths>\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"2MtwgT4VxzpKxCEnieV90nTAnOq\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"Discover.Launch.Via.Unity\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"node.js.detected.package.eslint\" value=\"true\" />\r\n    <property name=\"node.js.detected.package.tslint\" value=\"true\" />\r\n    <property name=\"node.js.path.for.package.eslint\" value=\"project\" />\r\n    <property name=\"node.js.path.for.package.tslint\" value=\"project\" />\r\n    <property name=\"node.js.selected.package.eslint\" value=\"(autodetect)\" />\r\n    <property name=\"node.js.selected.package.tslint\" value=\"(autodetect)\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"configurable.group.appearance\" />\r\n    <property name=\"vue.rearranger.settings.migration\" value=\"true\" />\r\n  </component>\r\n  <component name=\"RunManager\" selected=\"Attach to Unity Editor.Attach to Unity Editor\">\r\n    <configuration name=\"Attach to Unity Editor &amp; Play\" type=\"UNITY_DEBUG_RUN_CONFIGURATION\" factoryName=\"UNITY_ATTACH_AND_PLAY\" show_console_on_std_err=\"false\" show_console_on_std_out=\"false\" port=\"50000\" address=\"localhost\">\r\n      <option name=\"allowRunningInParallel\" value=\"false\" />\r\n      <option name=\"listenPortForConnections\" value=\"false\" />\r\n      <option name=\"pid\" />\r\n      <option name=\"selectedOptions\">\r\n        <list />\r\n      </option>\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <configuration name=\"Attach to Unity Editor\" type=\"UNITY_DEBUG_RUN_CONFIGURATION\" factoryName=\"Unity Debug\" show_console_on_std_err=\"false\" show_console_on_std_out=\"false\" port=\"50000\" address=\"localhost\">\r\n      <option name=\"allowRunningInParallel\" value=\"false\" />\r\n      <option name=\"listenPortForConnections\" value=\"false\" />\r\n      <option name=\"pid\" />\r\n      <option name=\"selectedOptions\">\r\n        <list />\r\n      </option>\r\n      <method v=\"2\" />\r\n    </configuration>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"默认任务\">\r\n      <changelist id=\"3f681314-839d-4fc6-9491-50771a848bcb\" name=\"默认的\" comment=\"\" />\r\n      <created>1678600318931</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1678600318931</updated>\r\n      <workItem from=\"1678600326038\" duration=\"1000\" />\r\n      <workItem from=\"1678600345539\" duration=\"1658000\" />\r\n      <workItem from=\"1678607953566\" duration=\"1357000\" />\r\n      <workItem from=\"1678686071972\" duration=\"3903000\" />\r\n      <workItem from=\"1678690540189\" duration=\"362000\" />\r\n      <workItem from=\"1678714212595\" duration=\"580000\" />\r\n      <workItem from=\"1678759511912\" duration=\"2809000\" />\r\n      <workItem from=\"1678859235380\" duration=\"7444000\" />\r\n      <workItem from=\"1678879626756\" duration=\"8890000\" />\r\n      <workItem from=\"1678968494226\" duration=\"5165000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"第一次提交\">\r\n      <created>1678600451169</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678600451169</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"第二次提交\">\r\n      <created>1678601114175</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678601114175</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"3\">\r\n      <created>1678608792655</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678608792655</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"Start场景\">\r\n      <created>1678689674485</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678689674485</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"Start场景\">\r\n      <created>1678689851651</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678689851651</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"场景切换\">\r\n      <created>1678787002788</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678787002788</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"场景切换\">\r\n      <created>1678787019833</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678787019833</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"场景切换\">\r\n      <created>1678787367864</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678787367864</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"场景切换\">\r\n      <created>1678787426416</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678787426416</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00010\" summary=\"场景切换\">\r\n      <created>1678787841071</created>\r\n      <option name=\"number\" value=\"00010\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678787841071</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00011\" summary=\"保存信息\">\r\n      <created>1678859385606</created>\r\n      <option name=\"number\" value=\"00011\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00011\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678859385606</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00012\" summary=\"基础旋转1\">\r\n      <created>1678972745180</created>\r\n      <option name=\"number\" value=\"00012\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00012\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1678972745180</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"13\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"UnityProjectConfiguration\" hasMinimizedUI=\"true\" />\r\n  <component name=\"UnityUnitTestConfiguration\" currentTestLauncher=\"EditMode\" />\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <option name=\"CLEAR_INITIAL_COMMIT_MESSAGE\" value=\"true\" />\r\n    <MESSAGE value=\"第一次提交\" />\r\n    <MESSAGE value=\"第二次提交\" />\r\n    <MESSAGE value=\"3\" />\r\n    <MESSAGE value=\"Start场景\" />\r\n    <MESSAGE value=\"场景切换\" />\r\n    <MESSAGE value=\"保存信息\" />\r\n    <MESSAGE value=\"基础旋转1\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"基础旋转1\" />\r\n  </component>\r\n  <component name=\"XSLT-Support.FileAssociations.UIState\">\r\n    <expand />\r\n    <select />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/.idea.Race/.idea/workspace.xml b/.idea/.idea.Race/.idea/workspace.xml
--- a/.idea/.idea.Race/.idea/workspace.xml	(revision e7ff17eefd714345369c72cba46ff5a1fb675f87)
+++ b/.idea/.idea.Race/.idea/workspace.xml	(date 1679056611795)
@@ -3,8 +3,6 @@
   <component name="ChangeListManager">
     <list default="true" id="3f681314-839d-4fc6-9491-50771a848bcb" name="默认的" comment="基础旋转1">
       <change beforePath="$PROJECT_DIR$/.idea/.idea.Race/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/.idea.Race/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/Assets/Scenes/Game1.unity" beforeDir="false" afterPath="$PROJECT_DIR$/Assets/Scenes/Game1.unity" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/Assets/Scenes/test.unity" beforeDir="false" afterPath="$PROJECT_DIR$/Assets/Scenes/test.unity" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/Assets/Scripts/ControllerFile/ViewController.cs" beforeDir="false" afterPath="$PROJECT_DIR$/Assets/Scripts/ControllerFile/ViewController.cs" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
@@ -18,6 +16,7 @@
   <component name="HighlightingSettingsPerFile">
     <setting file="file://$PROJECT_DIR$/Assets/Scripts/ControllerFile/CameraController.cs" root0="FORCE_HIGHLIGHTING" />
     <setting file="file://$PROJECT_DIR$/Assets/Scripts/Tools/GameLoop.cs" root0="FORCE_HIGHLIGHTING" />
+    <setting file="mock://D:/learn/Unity/Race/Race/Assets/Scripts/ControllerFile/ViewController.cs" root0="SKIP_HIGHLIGHTING" />
     <setting file="file://$PROJECT_DIR$/Library/PackageCache/com.unity.ide.rider@1.2.1/Rider/Editor/RiderScriptEditor.cs" root0="SKIP_HIGHLIGHTING" />
   </component>
   <component name="IdeDocumentHistory">
@@ -97,6 +96,7 @@
       <workItem from="1678859235380" duration="7444000" />
       <workItem from="1678879626756" duration="8890000" />
       <workItem from="1678968494226" duration="5165000" />
+      <workItem from="1679054358154" duration="2253000" />
     </task>
     <task id="LOCAL-00001" summary="第一次提交">
       <created>1678600451169</created>
@@ -182,7 +182,21 @@
       <option name="project" value="LOCAL" />
       <updated>1678972745180</updated>
     </task>
-    <option name="localTasksCounter" value="13" />
+    <task id="LOCAL-00013" summary="保存信息">
+      <created>1679054446823</created>
+      <option name="number" value="00013" />
+      <option name="presentableId" value="LOCAL-00013" />
+      <option name="project" value="LOCAL" />
+      <updated>1679054446823</updated>
+    </task>
+    <task id="LOCAL-00014" summary="保存信息">
+      <created>1679054460415</created>
+      <option name="number" value="00014" />
+      <option name="presentableId" value="LOCAL-00014" />
+      <option name="project" value="LOCAL" />
+      <updated>1679054460415</updated>
+    </task>
+    <option name="localTasksCounter" value="15" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
@@ -209,9 +223,9 @@
     <MESSAGE value="3" />
     <MESSAGE value="Start场景" />
     <MESSAGE value="场景切换" />
+    <MESSAGE value="基础旋转1" />
     <MESSAGE value="保存信息" />
-    <MESSAGE value="基础旋转1" />
-    <option name="LAST_COMMIT_MESSAGE" value="基础旋转1" />
+    <option name="LAST_COMMIT_MESSAGE" value="保存信息" />
   </component>
   <component name="XSLT-Support.FileAssociations.UIState">
     <expand />
Index: Assets/Scripts/ControllerFile/ViewController.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using System;\r\n//using TFramework;\r\nusing UnityEngine;\r\n\r\npublic class ViewController : MonoBehaviour\r\n{\r\n    const string INPUT_MOUSE_SCROLLWHEEL = \"Mouse ScrollWheel\";\r\n    const string INPUT_MOUSE_X = \"Mouse X\";\r\n    const string INPUT_MOUSE_Y = \"Mouse Y\";\r\n\r\n    public GameObject Box;\r\n    private GameObject verRotObj;\r\n    private GameObject horRotObj;\r\n    //鼠标增量\r\n    private float mHRot;\r\n    private float mVRot;\r\n    //鼠标灵敏度\r\n    public float mouseSensitivity;\r\n    //限制\r\n    float LimitY = 0, LimitX = 0;\r\n    \r\n    [Header(\"仰视角限制\")]\r\n    [Range(0.01f, 89.9f)]\r\n    public float downEulerLimit = 85f;\r\n    [Header(\"俯视角限制\")]\r\n    [Range(-0.01f, -89.9f)]\r\n    public float upEulerLimit = -85f;\r\n\r\n    [Header(\"右限制\")]\r\n    [Range(0.01f, 179.9f)]\r\n    public float mRightEulerLimit = 85f;\r\n    [Header(\"左限制\")]\r\n    [Range(-0.01f, -179.9f)]\r\n    public float mLeftEulerLimit = -85f;\r\n    \r\n    [Header(\"最远查看距离限制\")]\r\n    [Range(0, 1)]\r\n    public float farDistance = 0f;\r\n    [Header(\"最近查看距离限制\")]\r\n    [Range(0, 1)]\r\n    public float nearDistance = 0.8f;\r\n    [Header(\"当前缩放距离\")]\r\n    public float distance = 0.5f;\r\n    [Header(\"缩放速度\")]\r\n    public float zoomSpeed = 0.8f;\r\n\r\n    private void Start()\r\n    {\r\n        //创建Box旋转需要的两个空物体\r\n        if (verRotObj == null)\r\n            verRotObj = new GameObject(\"VerRotObj\");\r\n        if (horRotObj == null)\r\n            horRotObj = new GameObject(\"HorRotObj\");\r\n        \r\n        InitBox();\r\n    }\r\n\r\n    /// <summary>\r\n    /// 初始化Box位置与层级关系\r\n    /// </summary>\r\n    private void InitBox()\r\n    {\r\n        verRotObj.transform.position = Box.transform.position;\r\n        horRotObj.transform.position = Box.transform.position;\r\n        Box.transform.SetParent(horRotObj.transform);\r\n        horRotObj.transform.SetParent(verRotObj.transform);\r\n    }\r\n\r\n    private void Update()\r\n    {\r\n        UpdateObjDistanceState();\r\n        \r\n        if(Input.GetMouseButton(0))\r\n            MouseButtonL();\r\n        //if (Input.GetMouseButtonDown(0))\r\n            //TODO:MouseButtonDownL();鼠标滚轮缩放未完成\r\n    }\r\n\r\n    /// <summary>\r\n    /// 鼠标左键按下控制旋转\r\n    /// </summary>\r\n    private void MouseButtonL()\r\n    {\r\n        //获得鼠标增量\r\n        mHRot -= Input.GetAxis(INPUT_MOUSE_X) * mouseSensitivity * Time.deltaTime;\r\n        mVRot += Input.GetAxis(INPUT_MOUSE_Y)* mouseSensitivity * Time.deltaTime;\r\n        \r\n        LimitY += mVRot;\r\n        LimitX += mHRot;\r\n        if (LimitY < downEulerLimit && LimitY > upEulerLimit)\r\n            verRotObj.transform.Rotate(new Vector3(-mVRot, 0, 0), Space.Self);\r\n        else\r\n            LimitY -= mVRot;\r\n\r\n        if (LimitX < mRightEulerLimit && LimitX > mLeftEulerLimit)\r\n            horRotObj.transform.Rotate(new Vector3(0, mHRot, 0), Space.Self);\r\n        else\r\n            LimitX -= mHRot;\r\n    }\r\n\r\n    /// <summary>\r\n    /// 松开鼠标左键，进行鼠标增量初始化\r\n    /// </summary>\r\n    private void MouseButtonDownL()\r\n    {\r\n        mHRot = 0;\r\n        mVRot = 0;\r\n    }\r\n\r\n    /// <summary>\r\n    /// 鼠标滚轮缩放\r\n    /// </summary>\r\n    private void UpdateObjDistanceState()\r\n    {\r\n        if (Input.GetAxis(INPUT_MOUSE_SCROLLWHEEL) != 0f)\r\n        {\r\n            distance -= Input.GetAxis(INPUT_MOUSE_SCROLLWHEEL) * 100 * Time.deltaTime * -zoomSpeed;\r\n            distance = Mathf.Clamp(distance, farDistance, nearDistance);\r\n        }\r\n    }\r\n    \r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Assets/Scripts/ControllerFile/ViewController.cs b/Assets/Scripts/ControllerFile/ViewController.cs
--- a/Assets/Scripts/ControllerFile/ViewController.cs	(revision e7ff17eefd714345369c72cba46ff5a1fb675f87)
+++ b/Assets/Scripts/ControllerFile/ViewController.cs	(date 1679056670193)
@@ -12,27 +12,15 @@
     private GameObject verRotObj;
     private GameObject horRotObj;
     //鼠标增量
+    private float MouseX;
+    private float mouseY;
     private float mHRot;
     private float mVRot;
     //鼠标灵敏度
     public float mouseSensitivity;
-    //限制
-    float LimitY = 0, LimitX = 0;
-    
-    [Header("仰视角限制")]
-    [Range(0.01f, 89.9f)]
-    public float downEulerLimit = 85f;
-    [Header("俯视角限制")]
-    [Range(-0.01f, -89.9f)]
-    public float upEulerLimit = -85f;
+    //是否需要旋转
+    private bool isRevolve;
 
-    [Header("右限制")]
-    [Range(0.01f, 179.9f)]
-    public float mRightEulerLimit = 85f;
-    [Header("左限制")]
-    [Range(-0.01f, -179.9f)]
-    public float mLeftEulerLimit = -85f;
-    
     [Header("最远查看距离限制")]
     [Range(0, 1)]
     public float farDistance = 0f;
@@ -68,12 +56,14 @@
 
     private void Update()
     {
-        UpdateObjDistanceState();
+        //TODO:UpdateObjDistanceState();鼠标滚轮缩放未完成
         
         if(Input.GetMouseButton(0))
             MouseButtonL();
-        //if (Input.GetMouseButtonDown(0))
-            //TODO:MouseButtonDownL();鼠标滚轮缩放未完成
+        if(Input.GetMouseButtonUp(0))
+            MouseButtonUpL();
+        
+        BoxRotation();
     }
 
     /// <summary>
@@ -81,30 +71,39 @@
     /// </summary>
     private void MouseButtonL()
     {
+        isRevolve = true;
         //获得鼠标增量
-        mHRot -= Input.GetAxis(INPUT_MOUSE_X) * mouseSensitivity * Time.deltaTime;
-        mVRot += Input.GetAxis(INPUT_MOUSE_Y)* mouseSensitivity * Time.deltaTime;
-        
-        LimitY += mVRot;
-        LimitX += mHRot;
-        if (LimitY < downEulerLimit && LimitY > upEulerLimit)
-            verRotObj.transform.Rotate(new Vector3(-mVRot, 0, 0), Space.Self);
-        else
-            LimitY -= mVRot;
+        MouseX = Input.GetAxis(INPUT_MOUSE_X);
+        mouseY = Input.GetAxis(INPUT_MOUSE_Y);
+        mHRot -= MouseX * mouseSensitivity * Time.deltaTime;
+        mVRot -= mouseY * mouseSensitivity * Time.deltaTime;
+        if(Mathf.Abs(MouseX) < 0.1f)
+            mHRot = Mathf.Lerp(mHRot, 0, 0.1f);
+        if(Mathf.Abs(mouseY) < 0.1f)
+            mVRot = Mathf.Lerp(mVRot, 0, 0.1f);
+    }
 
-        if (LimitX < mRightEulerLimit && LimitX > mLeftEulerLimit)
-            horRotObj.transform.Rotate(new Vector3(0, mHRot, 0), Space.Self);
-        else
-            LimitX -= mHRot;
+    /// <summary>
+    /// 抬起鼠标左键时的操作
+    /// </summary>
+    private void MouseButtonUpL()
+    {
+        isRevolve = false;
     }
 
     /// <summary>
-    /// 松开鼠标左键，进行鼠标增量初始化
+    /// 盒子旋转
     /// </summary>
-    private void MouseButtonDownL()
+    public void BoxRotation()
     {
-        mHRot = 0;
-        mVRot = 0;
+        verRotObj.transform.Rotate(new Vector3(mVRot, 0, 0), Space.Self); 
+        horRotObj.transform.Rotate(new Vector3(0, mHRot, 0), Space.Self);
+
+        if (!isRevolve)
+        {
+            mHRot = Mathf.Lerp(mHRot, 0, 0.1f);
+            mVRot = Mathf.Lerp(mVRot, 0, 0.1f);
+        }
     }
 
     /// <summary>
